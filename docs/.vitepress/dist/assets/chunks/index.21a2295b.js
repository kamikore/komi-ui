import{ap as x,h as w,l as y,b as l,w as H,ax as U,d as M,o as b,c as N,r as R,E as q,p as G,y as J,A as _,B as C,a5 as W,z as Q,n as $,H as X,G as z,I as Y,t as Z,C as k,a6 as ee,T as se,ay as T,az as te}from"./framework.fad14ccc.js";import{i as E,b as ne,f as oe,g as ae,h as P,j as re,k as ie,l as ce,m as B}from"../app.61e7a66b.js";const le=(e,s)=>(e.install=r=>{for(const n of[e,...Object.values(s??{})])r.component(n.name,n)},e),ue=(e,s)=>(e.install=r=>{r.config.globalProperties[s]=e},e),V=e=>E(e)?e:Object.fromEntries(Object.entries(e).map(([s,r])=>[s,de(s,r)])),de=(e,s)=>{if(!ne(s))return s;const{type:r,required:n,values:t,validator:o,default:u}=s;let c=!1,d=[];return{type:r,required:!!n,default:u,validator:t||o?i=>{if(t&&(d=Array.from(t),c||(c=d.includes(i))),o&&(c||(c=o(i))),!c&&d.length>0){const p=[...new Set(d)].map(O=>JSON.stringify(O)).join(", ");x(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${p}], got value ${JSON.stringify(i)}.`)}return c}:void 0}},I=e=>e,fe="utils/dom/style";function me(e,s="px"){if(!e)return"";if(oe(e)||ae(e))return`${e}${s}`;if(P(e))return e;console.warn(`[${fe}] `,"binding value must be a string or number")}const pe=typeof window<"u",ge="ki",ve="is-",g=(e,s,r,n,t)=>{let o=`${e}-${s}`;return r&&(o+=`-${r}`),n&&(o+=`__${n}`),t&&(o+=`--${t}`),o},F=e=>{const s=ge;return{namespace:s,b:(a="")=>g(s,e,a,"",""),e:a=>a?g(s,e,"",a,""):"",m:a=>a?g(s,e,"","",a):"",be:(a,i)=>a&&i?g(s,e,a,i,""):"",em:(a,i)=>a&&i?g(s,e,"",a,i):"",bm:(a,i)=>a&&i?g(s,e,a,"",i):"",bem:(a,i,p)=>a&&i&&p?g(s,e,a,i,p):"",is:(a,...i)=>{const p=i.length>=1?i[0]:!0;return a&&p?`${ve}${a}`:""}}};function be(e,s,r={}){const{immediate:n=!0}=r,t=w(!1);let o=null;function u(){o&&(clearTimeout(o),o=null)}function c(){t.value=!1,u()}function d(...f){u(),t.value=!0,o=setTimeout(()=>{t.value=!1,o=null,e(...f)},s)}return n&&(t.value=!0,pe&&d()),{isPending:t,start:d,stop:c}}function ye(e,s,r={}){let n=new ResizeObserver(s);const t=window&&"ResizeObserver"in window,o=()=>{n&&(n.disconnect(),n=void 0)},u=y(()=>E(e)?e.map(f=>l(f)):[l(e)]),c=H(u,f=>{if(o(),window&&t){n=new ResizeObserver(s);for(const a of f)a&&n.observe(a,r)}},{immediate:!0,flush:"post",deep:!0});return{isSupported:t,stop:()=>{o(),c()}}}const $e=V({id:{type:String,default:""},duration:{type:Number,default:3e3},offset:{type:[String,Number],default:16},message:{type:I([String,Object,Function]),default:""},closable:{type:Boolean,default:!1},icon:{type:I([String,Object]),default:void 0},onClose:Function,onDestroy:Function}),v=U([]),he=e=>{const s=v.findIndex(t=>t.id===e),r=v[s];let n;return s>0&&(n=v[s-1]),{current:r,prev:n}},we=e=>{const{prev:s}=he(e);return s?s.vm.exposed.bottom.value:0},Oe=(e,s)=>v.findIndex(n=>n.id===e)>0?20:s,Se=V({size:{type:[Number,String]},color:{type:String},loading:Boolean}),_e=M({name:"KiIcon",inheritAttrs:!1,__name:"icon",props:Se,setup(e){const s=e,r=F("icon"),n=y(()=>{const{size:t,color:o}=s;return!t&&!o?{}:{fontSize:re(t)?void 0:me(t),color:o}});return(t,o)=>(b(),N("i",q({class:[l(r).b(),l(r).is("loading",t.loading)],style:n.value},t.$attrs),[R(t.$slots,"default")],16))}}),j=le(_e),Ce=["id"],Ne=["innerHTML"],ze=M({name:"KiMessage",__name:"message",props:$e,emits:["close","destroy"],setup(e,{expose:s,emit:r}){const n=e,t=F("message"),o=w(),u=w(!1),c=w(0),{stop:d}=ye(o,()=>{c.value=o.value.getBoundingClientRect().height}),f=y(()=>we(n.id)),a=y(()=>Oe(n.id,n.offset)+f.value),i=y(()=>c.value+a.value),p=y(()=>({top:`${a.value}px`})),{start:O,stop:A}=be(()=>{S()},n.duration,{immediate:!1});function D(){n.duration!==0&&O()}function K(){A()}function S(){u.value=!1}return G(()=>{u.value=!0,D()}),J(()=>{K(),d()}),s({visible:u,bottom:i,close:S}),(m,h)=>(b(),_(se,{name:l(t).b("fade"),onBeforeLeave:h[0]||(h[0]=L=>m.$emit("close")),onAfterLeave:h[1]||(h[1]=L=>m.$emit("destroy"))},{default:C(()=>[W(Q("div",{ref_key:"messageRef",ref:o,id:m.id,class:$(l(t).b()),style:X(p.value)},[z(l(j),{class:$(l(t).e("icon"))},{default:C(()=>[(b(),_(Y(m.icon||l(ie))))]),_:1},8,["class"]),R(m.$slots,"default",{},()=>[l(P)(m.message)?(b(),N("p",{key:0,class:$(l(t).e("content"))},Z(m.message),3)):(b(),N("p",{key:1,class:$(l(t).e("content")),innerHTML:m.message},null,10,Ne))]),m.closable?(b(),_(l(j),{key:0,class:$(l(t).e("icon-close")),onClick:S},{default:C(()=>[z(l(ce))]),_:1},8,["class"])):k("",!0)],14,Ce),[[ee,u.value]])]),_:3},8,["name"]))}});let Pe=1;const Te=e=>{const s=v.indexOf(e);if(s===-1)return;v.splice(s,1);const{handler:r}=e;r.close()},Be=e=>{const s=document.createElement("div");P(e)&&(e={message:e});const r=`message_${Pe++}`,n={...e,id:r,onClose:()=>{Te(c)},onDestroy:()=>{T(null,s)}},t=z(ze,n,B(n.message)||te(n.message)?{default:B(n.message)?n.message:()=>n.message}:null);T(t,s),document.body.appendChild(s.firstElementChild);const o=t.component,u={close:()=>{o.exposed.visible.value=!1}},c={id:r,vnode:t,props:o.props,vm:o,handler:u};return c},Ie=(e={})=>{const s=Be(e);return v.push(s),s.handler},Re=ue(Ie,"$message");export{Re as K};
